{% extends "base.html" %}

{% block title %}{{ candidate.name }} – {{ candidate.tagline or get_platform_settings().site_title or 'Wahlplattform' }}{% endblock %}
{% block description %}{{ candidate.tagline or candidate.name }}{% endblock %}

{% block head_extra %}
<style>:root{--theme-color:{{ candidate.theme_color or '#1E6FB9' }}}</style>
{% endblock %}

{% block header %}
{% include '_candidate_header.html' %}
{% endblock %}

{% block content %}
<section class="hero">
    <h1>{{ candidate.headline or 'Willkommen' }}</h1>
    {% if candidate.intro_text %}
    <div class="md-content">{{ candidate.intro_text | markdown }}</div>
    {% endif %}
</section>

{% if candidate.cta_text %}
<div class="cta-banner">
    <p>{{ candidate.cta_text }}</p>
    {% if candidate.cta_sub %}
    <p class="cta-sub">{{ candidate.cta_sub }}</p>
    {% endif %}
</div>
{% endif %}

{% if pages %}
<div class="cards-grid">
    {% for page in pages %}
    <a href="/{{ candidate.slug }}/{{ page.slug }}/" class="card-link" style="border-left-color:{{ page.color }}">
        <h3>{{ page.tile_title or page.theme }}</h3>
        <p>{{ page.tile_subtitle }}</p>
    </a>
    {% endfor %}
</div>
{% endif %}

{% if candidate.about_text %}
<section class="about-box">
    <h2>{{ candidate.about_title or 'Über mich' }}</h2>
    <div class="md-content">{{ candidate.about_text | markdown }}</div>
    {% if candidate.about_name_line %}
    <p class="name-line">{{ candidate.about_name_line }}</p>
    {% endif %}
</section>
{% endif %}

{% if links %}
<section class="partner-section">
    <h2>Netzwerk &amp; Partner</h2>
    <div class="partner-cards">
        {% for link in links %}
        <a href="{{ link.url }}" target="_blank" rel="noopener" class="partner-card">
            <span class="partner-label">{{ link.label }}</span>
            <span class="partner-url">{{ link.url | replace('https://', '') | replace('http://', '') | truncate(40) }} ↗</span>
        </a>
        {% endfor %}
    </div>
</section>
{% endif %}
{% endblock %}
