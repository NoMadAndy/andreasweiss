# Andreas Weiss â€“ Kommunalwahl Rohrbach v1.0.0
services:
  nginx:
    image: nginx:alpine
    ports:
      - "80:80"
    volumes:
      - ./nginx/nginx.conf:/etc/nginx/conf.d/default.conf:ro
      - ./static:/usr/share/nginx/html/andreasweiss:ro
    depends_on:
      - api
    restart: unless-stopped

  api:
    build: ./api
    volumes:
      - db_data:/data
      - ./config:/app/config:ro
      - ./data/geoip:/data/geoip:ro
    environment:
      - ADMIN_USER=${ADMIN_USER:-admin}
      - ADMIN_PASS=${ADMIN_PASS:-changeme}
      - ANALYTICS_SALT=${ANALYTICS_SALT:-change-this-salt}
      - DB_PATH=/data/andreasweiss.db
      - GEOIP_PATH=/data/geoip/GeoLite2-City.mmdb
      - CONFIG_PATH=/app/config/content.json
    restart: unless-stopped

volumes:
  db_data:
