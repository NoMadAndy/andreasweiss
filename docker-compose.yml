# Wahl 2026 â€“ Multi-Tenant Platform v2.0.0
services:
  nginx:
    image: nginx:alpine
    ports:
      - "${PORT:-8026}:80"
    volumes:
      - ./nginx/nginx.conf:/etc/nginx/conf.d/default.conf:ro
      - ./static/assets:/usr/share/nginx/html/assets:ro
      - ./data/uploads:/data/uploads:ro
    depends_on:
      - api
    restart: unless-stopped

  api:
    build: ./api
    volumes:
      - db_data:/data
      - ./data/geoip:/data/geoip
      - ./data/uploads:/data/uploads
    environment:
      - ANALYTICS_SALT=${ANALYTICS_SALT:-change-this-salt}
      - DB_PATH=/data/wahl2026.db
      - GEOIP_PATH=/data/geoip/GeoLite2-City.mmdb
      - UPLOAD_BASE=/data/uploads
      - PLATFORM_ADMIN_USER=${ADMIN_USER:-admin}
      - PLATFORM_ADMIN_PASS=${ADMIN_PASS:-changeme}
    restart: unless-stopped

volumes:
  db_data:
